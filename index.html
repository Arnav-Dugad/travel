<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Orbit: Travel Tracker</title>
    
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Fullscreen Map */
        body, html, #cesiumContainer { width: 100%; height: 100%; margin: 0; padding: 0; overflow: hidden; background-color: #000; }
        
        /* HUD Glass Effect */
        .glass-panel {
            background: rgba(10, 10, 20, 0.75);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 255, 255, 0.2);
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.15);
        }
        
        /* Sci-Fi Text Glow */
        .glow-text {
            text-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
        }
    </style>
</head>
<body>

    <div id="cesiumContainer"></div>

    <div class="absolute top-6 left-6 z-10 w-80 text-white">
        <div class="glass-panel p-6 rounded-xl">
            <h1 class="text-2xl font-bold tracking-widest uppercase mb-1 text-cyan-400 glow-text">TRAV-LOG</h1>
            <p class="text-xs text-gray-400 mb-6 tracking-wider">SATELLITE UPLINK: ACTIVE</p>
            
            <div class="space-y-4 font-mono text-sm">
                <div class="flex justify-between border-b border-gray-700 pb-2">
                    <span class="text-gray-400">TOTAL DISTANCE</span>
                    <span id="total-dist" class="text-cyan-300 font-bold text-lg">0 km</span>
                </div>
                <div class="flex justify-between border-b border-gray-700 pb-2">
                    <span class="text-gray-400">FLIGHTS LOGGED</span>
                    <span id="flight-count" class="text-cyan-300 font-bold text-lg">0</span>
                </div>
            </div>

            <div class="mt-6 space-y-2">
                <button onclick="flyHome()" class="w-full py-2 bg-cyan-900/50 hover:bg-cyan-800 border border-cyan-500/30 text-cyan-300 rounded transition uppercase text-xs font-bold tracking-widest">
                    Reset Camera
                </button>
                <button onclick="toggleDayNight()" class="w-full py-2 bg-gray-800/50 hover:bg-gray-700 border border-gray-600/30 text-gray-300 rounded transition uppercase text-xs font-bold tracking-widest">
                    Toggle Day/Night
                </button>
            </div>
        </div>
    </div>

    <script>
        // --- 1. CONFIGURATION ---
        // We use OpenStreetMap so no complex token is needed for the imagery.
        // If you want 3D Terrain later, put your token here.
        Cesium.Ion.defaultAccessToken = 'YOUR_TOKEN_HERE'; 

        // --- 2. INIT GLOBE ---
        const viewer = new Cesium.Viewer('cesiumContainer', {
            // Use OpenStreetMap (Free, Reliable)
            imageryProvider: new Cesium.UrlTemplateImageryProvider({
                url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                subdomains: ['a', 'b', 'c']
            }),
            baseLayerPicker: false,
            geocoder: false,
            homeButton: false,
            infoBox: false,
            sceneModePicker: false,
            navigationHelpButton: false,
            animation: false,
            timeline: false,
            fullscreenButton: false,
            
            // Render Settings for "Space Look"
            skyAtmosphere: new Cesium.SkyAtmosphere(),
            globe: new Cesium.Globe(Cesium.Ellipsoid.WGS84),
            skyBox: new Cesium.SkyBox({
                sources: {
                    positiveX: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_px.jpg',
                    negativeX: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_mx.jpg',
                    positiveY: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_py.jpg',
                    negativeY: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_my.jpg',
                    positiveZ: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_pz.jpg',
                    negativeZ: 'https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Assets/Textures/SkyBox/tycho2t3_80_mz.jpg'
                }
            })
        });

        // Hide Credits
        viewer.cesiumWidget.creditContainer.style.display = "none";
        
        // Enable Lighting (Day/Night) by default
        viewer.scene.globe.enableLighting = true;

        // --- 3. DATA ENGINE (Hardcoded Trips) ---
        // Add your trips here! Format: [Longitude, Latitude]
        const myTrips = [
            { name: "NYC to London", from: [-74.006, 40.712], to: [-0.127, 51.507] },
            { name: "London to Mumbai", from: [-0.127, 51.507], to: [72.877, 19.076] },
            { name: "Mumbai to Tokyo", from: [72.877, 19.076], to: [139.691, 35.689] },
            { name: "Tokyo to Sydney", from: [139.691, 35.689], to: [151.209, -33.868] }
        ];

        let totalKm = 0;

        // --- 4. RENDER FUNCTIONS ---
        function renderTrips() {
            myTrips.forEach(trip => {
                const start = Cesium.Cartesian3.fromDegrees(trip.from[0], trip.from[1]);
                const end = Cesium.Cartesian3.fromDegrees(trip.to[0], trip.to[1]);

                // 1. Draw Flight Path (Glowing Arc)
                viewer.entities.add({
                    name: trip.name,
                    polyline: {
                        positions: [start, end],
                        width: 4,
                        material: new Cesium.PolylineGlowMaterialProperty({
                            glowPower: 0.2,
                            color: Cesium.Color.CYAN
                        }),
                        arcType: Cesium.ArcType.GEODESIC
                    }
                });

                // 2. Draw City Marker (Dot)
                viewer.entities.add({
                    position: end,
                    point: { pixelSize: 8, color: Cesium.Color.ORANGE, outlineColor: Cesium.Color.BLACK, outlineWidth: 2 }
                });

                // 3. Calculate Distance for Stats
                const dist = calculateDistance(trip.from[1], trip.from[0], trip.to[1], trip.to[0]);
                totalKm += dist;
            });

            // Update HUD
            document.getElementById('total-dist').innerText = Math.round(totalKm).toLocaleString() + " km";
            document.getElementById('flight-count').innerText = myTrips.length;
        }

        // Helper: Haversine Formula for Distance (in KM)
        function calculateDistance(lat1, lon1, lat2, lon2) {
            const R = 6371; // Earth radius
            const dLat = (lat2 - lat1) * Math.PI / 180;
            const dLon = (lon2 - lon1) * Math.PI / 180;
            const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                      Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                      Math.sin(dLon/2) * Math.sin(dLon/2);
            const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
            return R * c;
        }

        // --- 5. INTERACTION FUNCTIONS ---
        function flyHome() {
            viewer.camera.flyTo({
                destination: Cesium.Cartesian3.fromDegrees(0, 20, 25000000), // Space view
                duration: 2.5
            });
        }

        function toggleDayNight() {
            viewer.scene.globe.enableLighting = !viewer.scene.globe.enableLighting;
        }

        // Start the Engine
        renderTrips();
        
        // Initial fly-in
        setTimeout(flyHome, 1000);

    </script>
</body>
</html>
